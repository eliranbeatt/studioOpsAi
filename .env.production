# StudioOps AI Production Environment Configuration
# This file contains production-optimized settings
# DO NOT include sensitive credentials in this file - use environment variables or secrets management

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# DATABASE_URL should be set via environment variable or secrets management
# Example: DATABASE_URL=postgresql://user:pass@prod-host:5432/studioops?sslmode=require

# Production database settings (larger pool, optimized for performance)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=50
DB_POOL_TIMEOUT=60
DB_POOL_RECYCLE=7200
DB_POOL_PRE_PING=true

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4  # Adjust based on CPU cores

# Production API features
API_CORS_ENABLED=false  # Disabled in production, use reverse proxy
API_DEBUG_MODE=false
API_RELOAD=false

# Production limits
API_REQUEST_TIMEOUT=30
API_MAX_REQUEST_SIZE=10485760  # 10MB
API_RATE_LIMIT=100  # Strict rate limiting

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================

# OpenAI API (set via environment variable)
# OPENAI_API_KEY should be set via secrets management
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7
OPENAI_REQUEST_TIMEOUT=30

# Trello Integration (set via environment variable)
# TRELLO_API_KEY and TRELLO_API_TOKEN should be set via secrets management
# TRELLO_DEFAULT_BOARD_ID should be set via environment variable

# MinIO Object Storage (production settings)
# MINIO_ENDPOINT should be set via environment variable
# MINIO_ACCESS_KEY and MINIO_SECRET_KEY should be set via secrets management
MINIO_SECURE=true
MINIO_REGION=us-east-1

# Production MinIO buckets
MINIO_DOCUMENTS_BUCKET=studioops-documents
MINIO_UPLOADS_BUCKET=studioops-uploads
MINIO_EXPORTS_BUCKET=studioops-exports
MINIO_TEMP_BUCKET=studioops-temp

# =============================================================================
# OBSERVABILITY AND MONITORING
# =============================================================================

# Langfuse (set via environment variable)
# LANGFUSE_HOST, LANGFUSE_PUBLIC_KEY, LANGFUSE_SECRET_KEY should be set via secrets management

# Production logging
LOG_LEVEL=WARNING
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/studioops/app.log
LOG_MAX_FILE_SIZE=52428800  # 50MB
LOG_BACKUP_COUNT=10

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Authentication (set via secrets management)
# JWT_SECRET_KEY should be a strong random key set via secrets management
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=8  # Shorter expiration for production

# Production CORS (set specific origins)
# API_CORS_ORIGINS should be set to specific production domains
# API_ALLOWED_HOSTS should be set to specific production hosts
API_RATE_LIMIT_ENABLED=true

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# Production frontend URLs (set via environment variable)
# NEXT_PUBLIC_API_URL should be set to production API URL
# NEXTAUTH_URL should be set to production frontend URL
# NEXTAUTH_SECRET should be set via secrets management

# =============================================================================
# PRODUCTION SPECIFIC SETTINGS
# =============================================================================

# Production flags
DEVELOPMENT_MODE=false
DEBUG_ENABLED=false
MOCK_SERVICES_ENABLED=false

# Production features
ENABLE_API_DOCS=false  # Disable API docs in production
ENABLE_PROFILING=false
ENABLE_MOCK_DATA=false

# =============================================================================
# PERFORMANCE OPTIMIZATION
# =============================================================================

# Connection pooling and caching
ENABLE_REDIS_CACHE=true
REDIS_CACHE_TTL=3600
ENABLE_DATABASE_QUERY_CACHE=true

# File upload optimization
ENABLE_MULTIPART_UPLOAD=true
CHUNK_SIZE=8388608  # 8MB chunks

# API optimization
ENABLE_GZIP_COMPRESSION=true
ENABLE_RESPONSE_CACHING=true
CACHE_MAX_AGE=300  # 5 minutes

# =============================================================================
# OPTIONAL SERVICES (Production)
# =============================================================================

# OCR Service
TESSERACT_CMD=/usr/bin/tesseract
OCR_LANGUAGES=eng,heb

# Email Service (production SMTP)
# SMTP_HOST, SMTP_USER, SMTP_PASSWORD should be set via secrets management
SMTP_PORT=587
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=noreply@studioops.ai

# Redis (production settings)
# REDIS_URL and REDIS_PASSWORD should be set via secrets management
REDIS_MAX_CONNECTIONS=20
REDIS_CONNECTION_TIMEOUT=10

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================

# Production health checks
HEALTH_CHECK_INTERVAL=120  # 2 minutes
HEALTH_CHECK_TIMEOUT=15
HEALTH_CHECK_RETRIES=3

# Service timeouts
DATABASE_HEALTH_TIMEOUT=10
MINIO_HEALTH_TIMEOUT=10
TRELLO_HEALTH_TIMEOUT=15
OPENAI_HEALTH_TIMEOUT=20

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Database backup settings
ENABLE_AUTOMATED_BACKUPS=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/studioops

# File storage backup
ENABLE_MINIO_BACKUP=true
MINIO_BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM

# =============================================================================
# MONITORING AND ALERTING
# =============================================================================

# Enable production monitoring
ENABLE_METRICS_COLLECTION=true
METRICS_ENDPOINT=http://prometheus:9090
ENABLE_HEALTH_ALERTS=true

# Alert thresholds
CPU_ALERT_THRESHOLD=80
MEMORY_ALERT_THRESHOLD=85
DISK_ALERT_THRESHOLD=90
ERROR_RATE_ALERT_THRESHOLD=5  # 5% error rate

# =============================================================================
# SECURITY HARDENING
# =============================================================================

# Security headers
ENABLE_SECURITY_HEADERS=true
ENABLE_CSRF_PROTECTION=true
ENABLE_XSS_PROTECTION=true

# Rate limiting
RATE_LIMIT_PER_IP=true
RATE_LIMIT_WINDOW=3600  # 1 hour
MAX_REQUESTS_PER_WINDOW=1000

# Content validation
MAX_FILE_SIZE=52428800  # 50MB
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,jpg,png
ENABLE_FILE_SCANNING=true